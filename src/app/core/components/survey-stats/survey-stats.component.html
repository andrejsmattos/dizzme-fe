<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <h1 class="h3 mb-1">Estatísticas da Pesquisa</h1>
      <p class="text-muted">Análise e resultados detalhados desta pesquisa.</p>
    </div>
  </div>

  <div class="row mt-4" *ngIf="isLoading">
    <div class="col-12 text-center">
      <output>
        <div class="spinner-border text-primary"></div>
      </output>
      <p class="mt-2 text-muted">Carregando estatísticas...</p>
    </div>
  </div>

  <div class="row mt-4" *ngIf="!isLoading && surveyStats">
    <div class="col-lg-12">
      <div class="card shadow-sm">
        <div class="card-body">
          <h4 class="card-title">{{ surveyStats.surveyTitle }}</h4>
          <p class="card-subtitle text-muted mb-3">{{ surveyStats.totalResponses }} Respostas</p>
          <hr>
          <div *ngFor="let q of surveyStats.questionStats">
            <h5>{{ q.questionText }}</h5>
            <div *ngIf="q.questionType === 'RATING' || q.questionType === 'MULTIPLE_CHOICE' || q.questionType === 'YES_NO'">
              <div *ngFor="let key of getKeys(q.answerDistribution)">
                <span>{{ key }}: {{ q.answerDistribution[key] }}</span>
              </div>
            </div>
            <div *ngIf="q.questionType === 'TEXT'">
              <div *ngFor="let answer of q.textAnswers">
                <span>{{ answer }}</span>
              </div>
            </div>
            <hr>
          </div>
        </div>
      </div>
    </div>

  <div class="row mt-4" *ngIf="!isLoading && !surveyStats">
    <div class="col-12 text-center">
      <p class="text-danger">Estatísticas não disponíveis para esta pesquisa.</p>
    </div>
  </div>
